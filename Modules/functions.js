var emojis = ["⛔","⛪","⛲","⛵","⛺","⛽","✅","✊","✨","❌","❎","❓","❔","❗","➕","➖","➰","➿","⬛","⭐","⭕","🀄","🃏","🆎","🆑","🆒"
,"🆓","🆔","🆕","🆖","🆗","🆘","🆙","🈁","🈚","🈯","🈲","🈳","🈴","🈵","🈸","🈹","🉐","🌀","🌁","🌂","🌃","🌄","🌅","🌆","🌇"
,"🌈","🌉","🌊","🌋","🌍","🌏","🌐","🌑","🌒","🌓","🌔","🌖","🌗","🌙","🌚","🌛","🌜","🌝","🌟","🌭","🌮","🌰","🌲","🌴","🌷",
"🌸","🌹","🌺","🌻","🌼","🌽","🌾","🌿","🍀","🍁","🍂","🍃","🍄","🍅","🍆","🍇","🍈","🍉","🍋","🍌","🍍","🍎","🍐","🍑","🍒",
"🍓","🍔","🍕","🍖","🍗","🍘","🍙","🍚","🍛","🍜","🍝","🍞","🍟","🍠","🍡","🍢","🍣","🍤","🍥","🍦","🍧","🍨","🍩","🍪","🍫","🍬"
,"🍭","🍮","🍯","🍰","🍱","🍲","🍳","🍴","🍵","🍶","🍷","🍸","🍹","🍺","🍼","🍾","🎀","🎁","🎂","🎃","🎄","🎅","🎆","🎇","🎈","🎉",
"🎊","🎋","🎌","🎍","🎎","🎏","🎐","🎑","🎒","🎠","🎡","🎢","🎣","🎤","🎥","🎦","🎧","🎨","🎩","🎪","🎫","🎬","🎭","🎮","🎯","🎰"
,"🎱","🎲","🎳","🎴","🎵","🎶","🎷","🎸","🎹","🎺","🎻","🎼","🎽","🎾","🎿","🏀","🏁","🏂","🏃","🏅","🏆","🏇","🏈","🏉","🏊","🏏"
,"🏐","🏑","🏒","🏠","🏡","🏢","🏤","🏥","🏦","🏧","🏨","🏩","🏪","🏫","🏬","🏭","🏮","🏯","🏴","🏸","🏹","🏺","🐀","🐁","🐂","🐃"
,"🐄","🐅","🐆","🐈","🐉","🐊","🐌","🐍","🐏","🐑","🐓","🐔","🐕","🐖","🐗","🐘","🐙","🐚","🐛","🐜","🐝","🐞","🐟","🐠","🐡","🐢"
,"🐣","🐤","🐥","🐦","🐧","🐨","🐪","🐫","🐬","🐭","🐮","🐯","🐰","🐱","🐲","🐳","🐴","🐵","🐶","🐷","🐸","🐹","🐺","🐻","🐼","🐽",
"👀","👂","👃","👄","👅","👆","👇","👈","👉","👊","👋","👌","👍","👎","👏","👐","👑","👒","👓","👔","👕","👖","👗","👘","👙","👚","👛",
"👜","👝","👞","👟","👠","👡","👢","👣","👥","👦","👧","👨","👩","👪","👬","👮","👯","👰","👱","👲","👳","👴","👵","👶","👷","👸","👹"
,"👺","👻","👼","👽","👾","👿","💀","💁","💂",
"💃","💄","💅","💆","💇","💈","💉","💊","💋","💌","💍","💎","💏","💐","💑",
"💒","💓","💔","💕","💖","💗","💘","💙","💚",
"💛","💜","💝","💞","💟","💠","💡","💢","💣"
,"💤","💥","💦","💧","💨","💩","💪","💫",
"💭","💮","💯","💰","💱","💲","💳","💴","💶","💸"
,"💹","💺","💻","💼","💽","💾","💿","📀","📁","📂","📃","📄","📅","📆","📇","📈","📉","📊","📋",
"📌","📍","📎","📏","📐","📑","📒","📓","📔","📕","📖","📗","📘","📙","📚","📛","📜","📝","📞","📟","📠"
,"📡","📢","📣","📤","📥","📦","📧","📨","📩","📪","📬","📮","📯","📰","📱","📲","📳","📵","📶"
,"📸","📹","📺","📻","📿","🔀","🔁","🔃","🔄","🔅","🔆","🔈","🔉","🔊","🔋","🔌","🔍","🔎","🔏","🔐"
,"🔑","🔒","🔓","🔕","🔖","🔗","🔘","🔙","🔚","🔛","🔜","🔝","🔞","🔟","🔠","🔡","🔢","🔣","🔤","🔥","🔦"
,"🔧","🔨","🔩","🔪","🔬","🔮","🔯","🔰","🔱","🔲","🔳","🔴","🔵","🔶","🔷","🔸","🔹","🔺","🔻","🔼","🕋","🕌"
,"🕍","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤",
"🕥","🕦","🕺","🖕","🖤","🗻","🗼","🗽","🗾","😀","😁","😂","😃","😄","😅","😇","😉","😊","😋","😌","😎","😏"
,"😐","😑","😒","😓","😕","😖","😗","😘","😙","😚","😛","😜","😝","😟","😠","😡","😢","😣","😤","😦","😨",
"😩","😪","😬","😭","😮","😰","😱","😲","😴","😵","😶","😷","😸","😹","😺","😻","😼","😽","😾","😿","🙁","🙂"
,"🙃","🙅","🙆","🙇","🙈","🙉","🙊","🙋","🙌","🙍","🙎","🚀","🚁","🚃","🚄","🚆","🚇","🚈","🚉","🚊","🚌","🚍",
"🚎","🚏","🚐","🚑","🚒","🚔","🚕","🚖","🚗","🚘","🚙","🚛","🚜","🚝","🚞","🚟","🚠","🚢","🚣","🚤","🚦","🚧","🚨"
,"🚩","🚪","🚫","🚬","🚮","🚯","🚰","🚲","🚳","🚴","🚶","🚷","🚹","🚺","🚻","🚼","🚽","🚿","🛀","🛁","🛂","🛃","🛄","🛌","🛐","🛑","🛕","🛫","🛴",
"🛵","🛷","🛹","🛺","🟠","🟡","🟢","🟣","🟤","🟥","🟦","🟧","🟨","🟩","🟪","🤍","🤎","🤐","🤑","🤒","🤓","🤔","🤕","🤖",
"🤗","🤙","🤚","🤛","🤜","🤝","🤟","🤠","🤡","🤢","🤣","🤤","🤥","🤦","🤨","🤩","🤪","🤫","🤬","🤭","🤮","🤰","🤱","🤳","🤴","🤵"
,"🤶","🤷","🤸","🤹","🤼","🤽","🤿","🥀","🥁","🥂","🥃","🥄","🥇","🥈","🥉","🥊","🥌","🥍","🥎","🥐","🥑","🥒","🥓","🥔","🥕",
"🥖","🥗","🥘","🥙","🥚","🥛","🥜","🥝","🥟","🥠","🥡","🥢","🥣","🥤","🥥","🥦","🥧","🥨","🥩","🥪","🥬","🥭","🥮","🥯","🥱",
"🥳","🥴","🥵","🥺","🥻","🥼","🥽","🥾","🦀","🦁","🦂","🦃","🦅","🦆","🦇","🦈","🦉","🦊","🦋","🦌","🦍","🦎","🦏","🦐","🦒",
"🦓","🦔","🦕","🦖","🦘","🦙","🦚","🦛","🦜","🦝","🦞","🦟","🦠","🦡","🦥","🦦","🦧","🦨","🦩","🦮","🦰","🦱","🦲","🦳","🦴",
"🦵","🦶","🦷","🦸","🦺","🦻","🦼","🦽","🦾","🧀","🧁","🧃","🧄","🧅","🧆","🧇","🧈","🧉","🧍","🧎","🧐","🧑","🧒","🧓","🧔","🧕"
,"🧖","🧗","🧘","🧙","🧚","🧛","🧜","🧝","🧞","🧟","🧠","🧡","🧢","🧣","🧤","🧥","🧧","🧨","🧩","🧪","🧫","🧬","🧭","🧮","🧯",
"🧰","🧱","🧲","🧳","🧴","🧵","🧶","🧷","🧸","🧹","🧺","🧻","🧼","🧽","🧾","🩰","🩱","🩲","🩸","🩹","🪀","🪁","🪐","🪑","🪒","🪓"
,"🪔","↖️","↗️","↘️","↙️","↩️","↪️","⌨️","⏏️","⏭️","⏮️","⏯️","⏱️","⏲️","⏸️","⏹️","⏺️","Ⓜ️","▪️","▫️","▶️","◀️","◻️","◼️","☀️","☁️","☂️","☃️","☄️","☎️","☑️","☘️","☝️","☠️","☢️","☣️","☦️","☪️","☮️","☯️","☸️","☹️","☺️","♀️","♂️","♟️","♠️","♣️","♥️","♦️","♨️","♻️","♾️","⚒️","⚔️","⚕️","⚖️","⚗️","⚙️","⚛️","⚜️","⚠️","⚧️","⚰️","⚱️","⛈️","⛏️","⛑️","⛓️","⛩️","⛰️","⛱️","⛴️","⛷️","⛸️","⛹️","✂️","✈️","✉️","✌️","✍️","✏️","✒️","✔️","✖️","✝️","✡️","✳️","✴️","❄️","❇️","❣️","❤️","➡️","⤴️","⤵️","⬅️","⬆️","⬇️","〰️","〽️","㊗️","㊙️","🅰️","🅱️","🅾️","🅿️","🈂️","🈷️","🌡️","🌤️","🌥️","🌦️","🌧️","🌨️","🌩️","🌪️","🌫️","🌬️","🌶️","🍽️","🎖️","🎗️","🎙️","🎚️","🎛️","🎞️","🎟️","🏋️","🏌️","🏍️","🏎️","🏔️","🏕️","🏖️","🏗️","🏘️","🏙️","🏚️","🏛️","🏜️","🏝️","🏞️","🏟️","🏳️","🏵️","🏷️","🐿️","👁️","📽️","🕉️","🕊️","🕯️","🕰️","🕳️","🕴️","🕵️","🕶️","🕷️","🕸️","🕹️","🖇️","🖊️","🖋️","🖌️","🖍️","🖐️","🖥️","🖨️","🖱️","🖲️","🖼️","🗂️","🗃️","🗄️","🗑️","🗒️","🗓️","🗜️","🗝️","🗞️","🗡️","🗣️","🗨️","🗯️","🗳️","🗺️","🛋️","🛍️","🛎️","🛏️","🛠️","🛡️","🛢️","🛣️","🛤️","🛥️","🛩️","🛰️","🛳️","#️⃣","*️⃣","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","☝🏻","☝🏼","☝🏽","☝🏾","☝🏿","⛹🏻","⛹🏼","⛹🏽","⛹🏾","⛹🏿","✊🏻","✊🏼","✊🏽","✊🏾","✊🏿","👨‍❤️‍👨","👨‍❤️‍💋‍👨","👨‍👦","👨‍👦‍👦","👨‍👧","👨‍👧‍👦","👨‍👧‍👧","👨‍👨‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👧‍👧","👨‍👩‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧","👨‍👩‍👧‍👦"];
const { Hihi, Heyhey, Meow, Chem, Jum, Ricado, Zitdance, Cat, Lacdau, Hack, Cheme, Laclac, Dj, Omg, Muiten } = require("../Modules/Json/emoji");
const { GatewayIntentBits, Partials, Collection, EmbedBuilder,  ButtonBuilder, ActionRowBuilder, SelectMenuBuilder } = require("discord.js");
const { generateQueueEmbed } = require("./Distube/DistubeModules/interactionCreate");
const database = require("./Json/database.json");
const config = require("../config.json");
const { readdirSync } = require("fs");
const os = require("os");
module.exports = (client) = {
/**
  * client bot
**/
  Client_BlackCat: function() {
      return {
         restTimeOffset: 0,  
         fetchAllMembers: false,
         shards: "auto",
         allowedMentions: {
            parse: ["users"],
            repliedUser: false 
         },
         restWsBridgeTimeout: 100,  
         failIfNotExists: false,
         partials: [
            Partials.Message, 
            Partials.Channel,  
            Partials.Reaction,  
         ],
         intents: [
            GatewayIntentBits.Guilds, GatewayIntentBits.GuildMembers, GatewayIntentBits.GuildBans, GatewayIntentBits.GuildEmojisAndStickers, GatewayIntentBits.GuildIntegrations, GatewayIntentBits.GuildWebhooks, 
            GatewayIntentBits.GuildInvites, GatewayIntentBits.GuildVoiceStates, GatewayIntentBits.GuildPresences, GatewayIntentBits.GuildMessages, GatewayIntentBits.GuildMessageReactions, GatewayIntentBits.GuildMessageTyping, 
            GatewayIntentBits.DirectMessages, GatewayIntentBits.DirectMessageReactions, GatewayIntentBits.DirectMessageTyping, GatewayIntentBits.MessageContent, 
         ]
    };
  },
/**
  * events corona commands
**/
  random: function(options) {
    var numberOfEmojis = options.count;
    var result = [];
    for (var i = 0; i < numberOfEmojis; i++) {
      randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
      result.push(randomEmoji);
    }
    return result;
  },
   
  capitalizeWords: function(string) {
        return string.replace(/(?!^[0-9])(^|[^a-zA-Z\u00C0-\u017F\u0400-\u04FF'])([a-zA-Z\u00C0-\u017F\u0400-\u04FF])/g, function(m) {
            return m.toUpperCase();
        });
  },

  laysodep: function(num) {
        const pattern = /\B(?=(\d{3})+(?!\d))/g;
        return num.toString().replace(pattern, ',');
  },
/**
  * Thời gian hồi lệnh
**/
  onCoolDown: function(message, command) {
           if(!message || !message.client) throw "";
           if(!command || !command.name) throw "";
           const client = message.client;
           if (!client.cooldowns.has(command.name)) { 
              client.cooldowns.set(command.name, new Collection());
           }
          const now = Date.now(); 
          const timestamps = client.cooldowns.get(command.name);
          const cooldownAmount = (command.cooldown) * 1000; 
          if (timestamps.has(message.author.id)) { 
              const expirationTime = timestamps.get(message.author.id) + cooldownAmount; 
           if (now < expirationTime) {
              const timeLeft = (expirationTime - now) / 1000; 
             return timeLeft
            } else {
             timestamps.set(message.author.id, now); 
              setTimeout(() => timestamps.delete(message.author.id), cooldownAmount); 
              return false;
            }
          } else {
              timestamps.set(message.author.id, now); 
              setTimeout(() => timestamps.delete(message.author.id), cooldownAmount); 
              return false;
          };
  },
/**
  * lấy thông tin user và tất cả user
**/
  GetUser: function(message, arg){
    var errormessage = ":x: Tôi không tìm thấy thành viên đó...";
    return new Promise(async (resolve, reject) => {
      var args = arg, client = message.client;
      if(!client || !message) return reject("KHÁCH HÀNG KHÔNG ĐƯỢC ĐỊNH NGHĨA")
      if(!args || args == null || args == undefined) args = message.content.trim().split(/ +/).slice(1);
      let user = message.mentions.users.first();
      if(!user && args[0] && args[0].length == 18) {
        user = await client.users.fetch(args[0])
        if(!user) return reject(errormessage)
        return resolve(user);
      } else if(!user && args[0]){
        let alluser = message.guild.members.cache.map(member=> String(member.user.tag).toLowerCase())
        user = alluser.find(user => user.startsWith(args.join(" ").toLowerCase()))
        user = message.guild.members.cache.find(me => String(me.user.tag).toLowerCase() == user)
        if(!user || user == null || !user.id) {
          alluser = message.guild.members.cache.map(member => String(member.displayName + "#" + member.user.discriminator).toLowerCase())
          user = alluser.find(user => user.startsWith(args.join(" ").toLowerCase()))
          user = message.guild.members.cache.find(me => String(me.displayName + "#" + me.user.discriminator).toLowerCase() == user)
          if(!user || user == null || !user.id) return reject(errormessage)
        }
        user = await client.users.fetch(user.user.id)
        if(!user) return reject(errormessage)
        return resolve(user);
      } else {
        user = message.mentions.users.first() || message.author;
        return resolve(user);
      }
    });
  },
  GetGlobalUser: function(message, arg){
    var errormessage = ":x: Tôi không tìm thấy thành viên đó...";
    return new Promise(async (resolve, reject) => {
      var args = arg, client = message.client;
      if(!client || !message) return reject("KHÁCH HÀNG KHÔNG ĐƯỢC ĐỊNH NGHĨA")
      if(!args || args == null || args == undefined) args = message.content.trim().split(/ +/).slice(1);
      let user = message.mentions.users.first();
      if(!user && args[0] && args[0].length == 18) {
        user = await client.users.fetch(args[0])
        if(!user) return reject(errormessage)
        return resolve(user);
      } else if(!user && args[0]){
        let alluser = [], allmembers = [];
        var guilds = Array.from(client.guilds.cache.values())
        for(const g of guilds){
          var members = Array.from(g.members.cache.values());
          for(const m of members) { alluser.push(m.user.tag); allmembers.push(m); }
        }
        user = alluser.find(user => user.startsWith(args.join(" ").toLowerCase()))
        user = allmembers.find(me => String(me.user.tag).toLowerCase() == user)
        if(!user || user == null || !user.id) {
          user = alluser.find(user => user.startsWith(args.join(" ").toLowerCase()))
          user = allmembers.find(me => String(me.displayName + "#" + me.user.discriminator).toLowerCase() == user)
          if(!user || user == null || !user.id) return reject(errormessage)
        }
        user = await client.users.fetch(user.user.id)
        if(!user) return reject(errormessage)
        return resolve(user);
      } else {
        user = message.mentions.users.first() || message.author;
        return resolve(user);
      }
    });
  },
/**
 *  cpuStart <Botinfo Start> 
**/
  usagePercent: function(opts, cb) {
    var cpus = os.cpus();
    var timeUsed;
    var timeUsed0 = 0;
    var timeUsed1 = 0;
    var timeIdle;
    var timeIdle0 = 0;
    var timeIdle1 = 0;
    var cpu1;
    var cpu0;
    var time;
  
    if (typeof opts === 'function') {
      cb = opts;
      opts = {
        coreIndex: -1,
        sampleMs: 1000,
      };
    } else {
      opts.coreIndex = opts.coreIndex || -1;
      opts.sampleMs = opts.sampleMs || 1000;
    }
  
    if (opts.coreIndex < -1 ||
        opts.coreIndex >= cpus.length ||
        typeof opts.coreIndex !== 'number' ||
        Math.abs(opts.coreIndex % 1) !== 0
    ) {
      _error(opts.coreIndex, cpus.length);
      return cb('chỉ số cốt lõi "' + opts.coreIndex + '" ngoài giới hạn, ' +
        'nên là [0, ' + (cpus.length - 1) + ']');
    }
  
    if (opts.coreIndex === -1) {
      cpu0 = os.cpus();
      time = process.hrtime();
      setTimeout(function() {
        cpu1 = os.cpus();
        var diff = process.hrtime(time);
        var diffSeconds = diff[0] + diff[1] * 1e-9;
        for (var i = 0; i < cpu1.length; i++) {
          timeUsed1 += cpu1[i].times.user;
          timeUsed1 += cpu1[i].times.nice;
          timeUsed1 += cpu1[i].times.sys;
          timeIdle1 += cpu1[i].times.idle;
        }
        for (i = 0; i < cpu0.length; i++) {
          timeUsed0 += cpu0[i].times.user;
          timeUsed0 += cpu0[i].times.nice;
          timeUsed0 += cpu0[i].times.sys;
          timeIdle0 += cpu0[i].times.idle;
        }
        timeUsed = timeUsed1 - timeUsed0;
        timeIdle = timeIdle1 - timeIdle0;
        var percent = (timeUsed / (timeUsed + timeIdle)) * 100;
        return cb(null, percent, diffSeconds);
      }, opts.sampleMs);
    } else {
      cpu0 = os.cpus();
      time = process.hrtime();
      setTimeout(function() {
        cpu1 = os.cpus();
        var diff = process.hrtime(time);
        var diffSeconds = diff[0] + diff[1] * 1e-9;
  
        timeUsed1 += cpu1[opts.coreIndex].times.user;
        timeUsed1 += cpu1[opts.coreIndex].times.nice;
        timeUsed1 += cpu1[opts.coreIndex].times.sys;
        timeIdle1 += cpu1[opts.coreIndex].times.idle;
        timeUsed0 += cpu0[opts.coreIndex].times.user;
        timeUsed0 += cpu0[opts.coreIndex].times.nice;
        timeUsed0 += cpu0[opts.coreIndex].times.sys;
        timeIdle0 += cpu0[opts.coreIndex].times.idle;
  
        var timeUsed = timeUsed1 - timeUsed0;
        var timeIdle = timeIdle1 - timeIdle0;
        var percent = (timeUsed / (timeUsed + timeIdle)) * 100;
        return cb(null, percent, diffSeconds);
      }, opts.sampleMs);
    };
  },

  totalCores: function() {
    return os.cpus().length;
  },
  
  clockMHz: function(coreIndex) {
    var cpus = os.cpus();
    if (coreIndex < 0 ||
        coreIndex >= cpus.length ||
        typeof coreIndex !== 'number' ||
        Math.abs(coreIndex % 1) !== 0
    ) {
      _error(coreIndex, cpus.length);
      return 'chỉ số cốt lõi "' + coreIndex + '" ngoài giới hạn, ' +
        'nên là [0, ' + (cpus.length - 1) + ']';
    }
    return cpus[coreIndex].speed;
  },
  
  avgClockMHz: function() {
    var cpus = os.cpus();
    var totalHz = 0;
    for (var i = 0; i < cpus.length; i++) {
      totalHz += cpus[i].speed;
    }
    var avgHz = totalHz / cpus.length;
    return avgHz;
  },
  _error: function(coreIndex, cores) {
      var errMsg =
        '[cpu-stats] Error: Core "' + coreIndex + '" không tìm thấy, hãy sử dụng một trong số ' +
        '[0, ' + (cores - 1) + '], ' +
        'vì hệ thống của bạn có tổng số ' + cores + ' lõi';
    console.log(errMsg);
  },
/*
   await message 
*/
  wait: function(ms) {
    let start = new Date().getTime();
    let end = start;
    while (end < start + ms) {
      end = new Date().getTime();
    };
  },
/**
    phân bổ danh mục của lệnh help
**/
  phan_bo_tung_danh_muc: function(filterdisabled = false){
          const economycmds = [];
          const emotionscmds = [];
          const filtercmds = [];
          const gamecmds = [];
          const giveawaycmds = [];
          const imagecmds = []; 
          const includescmds = [];
          const moderationcmds = [];
          const musiccmds = [];
          const rankingcmds = [];
          const settingscmds = [];
          const utilitycmds = [];
          const voicecmds = [];
          const voicesetupcmds = [];
          readdirSync(`./commands/Economy`).forEach((file) => {
            const pull = require(`../commands/Economy/${file}`);
            const name = `${pull.name}`
            economycmds.push(name);       
          });
          readdirSync(`./commands/Developer`).forEach((file) => {
          const pull = require(`../commands/Developer/${file}`);
          const name = `${pull.name}`
          emotionscmds.push(name);       
          });
          readdirSync(`./commands/Filter`).forEach((file) => {
          const pull = require(`../commands/Filter/${file}`);
          const name = `${pull.name}`
          filtercmds.push(name);
          });
          readdirSync(`./commands/Game`).forEach((file) => {
          const pull = require(`../commands/Game/${file}`);
          const name = `${pull.name}`
          gamecmds.push(name);
          });
          readdirSync(`./commands/Giveaways`).forEach((file) => {
          const pull = require(`../commands/Giveaways/${file}`);
          const name = `${pull.name}`
          giveawaycmds.push(name);
          });
          readdirSync(`./commands/Image`).forEach((file) => {
          const pull = require(`../commands/Image/${file}`);
          const name = `${pull.name}`
          imagecmds.push(name);
          });
          readdirSync(`./commands/Information`).forEach((file) => {
          const pull = require(`../commands/Information/${file}`);
          const name = `${pull.name}`
          includescmds.push(name);
          });
          readdirSync(`./commands/Moderation`).forEach((file) => {
          const pull = require(`../commands/Moderation/${file}`);
          const name = `${pull.name}`
          moderationcmds.push(name);
          });
          readdirSync(`./commands/Music`).forEach((file) => {
          const pull = require(`../commands/Music/${file}`);
          const name = `${pull.name}`
          musiccmds.push(name);
          });
          readdirSync(`./commands/Ranking`).forEach((file) => {
            const pull = require(`../commands/Ranking/${file}`);
            const name = `${pull.name}`
            rankingcmds.push(name);
          });
          readdirSync(`./commands/Settings`).forEach((file) => {
          const pull = require(`../commands/Settings/${file}`);
          const name = `${pull.name}`
          settingscmds.push(name);
          });
          readdirSync(`./commands/Utility`).forEach((file) => {
          const pull = require(`../commands/Utility/${file}`);
          const name = `${pull.name}`
          utilitycmds.push(name);
          });
          readdirSync(`./commands/Voice`).forEach((file) => {
          const pull = require(`../commands/Voice/${file}`);
          const name = `${pull.name}`
          voicecmds.push(name);
          });
          readdirSync(`./commands/Voice Setup`).forEach((file) => {
          const pull = require(`../commands/Voice Setup/${file}`);
          const name = `${pull.name}`
          voicesetupcmds.push(name);
          });
          var embeds = [];
          var embed0 = new EmbedBuilder() // Economy
          .setColor(database.colors.vang)
          .setTitle("Economy Commands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${economycmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed0)

          var embed1 = new EmbedBuilder() // emotion
          .setColor(database.colors.vang)
          .setTitle("Dev Commands")
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${emotionscmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
           embeds.push(embed1)

          var embed2 = new EmbedBuilder() // filter
          .setColor(database.colors.vang)
          .setTitle("Filter Commands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${filtercmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed2)
 
          var embed3 = new EmbedBuilder() // game
          .setColor(database.colors.vang)
          .setTitle("Game Commands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${gamecmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed3)

          var embed4 = new EmbedBuilder() // giveaway
          .setColor(database.colors.vang)
          .setTitle("Giveaway Commands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${giveawaycmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed4)

          var embed5 = new EmbedBuilder() // image
          .setColor(database.colors.vang)
          .setTitle("Images Commands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${imagecmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed5)

          var embed6 = new EmbedBuilder() // includes
          .setColor(database.colors.vang)
          .setTitle("Information Commands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${includescmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed6)

          var embed7 = new EmbedBuilder() // moderation
          .setColor(database.colors.vang)
          .setTitle("Moderation Coomands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${moderationcmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed7)
          
          var embed8 = new EmbedBuilder() // music 
          .setColor(database.colors.vang)
          .setTitle("Music Commands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${musiccmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed8)
          var embed9 = new EmbedBuilder() // ranking
          .setColor(database.colors.vang)
          .setTitle("Ranking") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${rankingcmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed9)
          
          var embed10 = new EmbedBuilder() // settings
          .setColor(database.colors.vang)
          .setTitle("Settings Commands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${settingscmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed10)
          
          var embed11 = new EmbedBuilder() // utility
          .setColor(database.colors.vang)
          .setTitle("Utility Commands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${utilitycmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed11)

          var embed12 = new EmbedBuilder() // voice
          .setColor(database.colors.vang)
          .setTitle("Voice Commands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${voicecmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed12)
          
          var embed13 = new EmbedBuilder() // voice setup
          .setColor(database.colors.vang)
          .setTitle("Voice Setup Coomands") 
          .setDescription(`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
\`\`\`
${voicesetupcmds.map((data) => data).join(", ")}  
\`\`\`
${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi} - ${Hihi}
         `)
          embeds.push(embed13)
          return embeds.map((embed, index) => {
            return embed
            .setColor(database.colors.vang)
            .setFooter({ text: `${index + 1}/${embeds.length}`, iconURL:  `${database.avatar}`});
      });
   },
/***
   * Distube events
***/
  updateMusicSystem: async function(queue, leave = false) {
          if(!queue) return;
          if (client.settings.get(queue.id, `music.channel`).length > 5) { //  && client.settings.get(queue.id, `music.channel`)
          let messageId = client.settings.get(queue.id, `music.message`);
          let guild = client.guilds.cache.get(queue.id);
          if (!guild) return;
          let channel = guild.channels.cache.get(client.settings.get(queue.id, `music.channel`));
          if (!channel) channel = await guild.channels.fetch(client.settings.get(queue.id, `music.channel`)).catch(() => {}) || false
          if (!channel) return;
          if (!channel.permissionsFor(channel.guild.me).has(PermissionFlagsBits.SendMessages)) return 
          let message = channel.messages.cache.get(messageId);
          if (!message) message = await channel.messages.fetch(messageId).catch(() => {}) || false;
          if (!message) return;
          var data = generateQueueEmbed(client, queue.id, leave)
          message.edit(data).catch((e) => {
              console.log(e)
          }).then(m => {/* */});
        };
  },
  dj_role2: function(client, member, song) {
    if(!client) return false;
    var roleid = client.settings.get(member.guild.id, `djroles`)
    if (String(roleid) == "") return false;
    var isdj = false;
    for (let i = 0; i < roleid.length; i++) {
        if (!member.guild.roles.cache.get(roleid[i])) continue;
        if (member.roles.cache.has(roleid[i])) isdj = true;
    }
    if (!isdj && !member.permissions.has("Administrator") && song.user.id != member.id) {
        return roleid.map(i=>`<@&${i}>`).join(", ");
    } else {
        return false;
    }
  },
  
  createBar: function(total, current, size = 25, line = "▬", slider = `${emoji.Hihi}`) {
    try {
      if (!total) throw "BỎ LỠ LẦN TỐI ĐA";
      if (!current) return `**[${slider}${line.repeat(size - 1)}]**`;
      let bar = current > total 
          ? [line.repeat(size / 2 * 2), (current / total) * 100] 
          : [line.repeat(Math.round(size / 2 * (current / total))).replace(/.$/, slider) 
            + line.repeat(size - Math.round(size * (current / total)) + 1), current / total];
      if (!String(bar).includes(slider)) {
        return `**[${slider}${line.repeat(size - 1)}]**`;
      } else{
        return `**[${bar[0]}]**`;
      }
    } catch (e) {
      console.log(String(e.stack))
    }
  },

  delay: function(delayInms) {
    try {
      return new Promise((resolve) => {
        setTimeout(() => {
          resolve(2);
        }, delayInms);
      });
    } catch (e) {
      console.log(String(e.stack))
    }
  },
  escapeRegex: function(str) {
    try {
      return str.replace(/[.*+?^${}()|[\]\\]/g, `\\$&`);
    } catch (e) {
      console.log(String(e.stack).bgRed)
    }
  },
/***
   * Buttons Embed Pages
***/
  embedPages: async function(client, message, pages, style = {}) {
  	style.firstEmoji ||= '⏪'
	  style.forwardEmoji ||= '▶️'
	  style.backEmoji ||= '◀️'
	  style.lastEmoji ||= '⏩'
	  style.btncolor ||= 'Success'
	  style.delEmoji ||= '🗑'
	  style.delcolor ||= 'Danger'
	  style.skipcolor ||= 'Primary'
	  style.pgCount ??= false
	  style.skipBtn ??= true
	  style.delBtn ??= true
	  try {
		if (!pages)
		var comps
		if (style.rows) {
			if (!Array.isArray(style.rows))
			comps = rows
		} else {
			comps = []
		}
		let firstBtn = new ButtonBuilder()
			.setCustomId('first_embed')
			.setEmoji(style.firstEmoji)
			.setStyle(style.skipcolor)
		let forwardBtn = new ButtonBuilder()
			.setCustomId('forward_button_embed')
			.setEmoji(style.forwardEmoji)
			.setStyle(style.btncolor)
		let backBtn = new ButtonBuilder()
			.setCustomId('back_button_embed')
			.setEmoji(style.backEmoji)
			.setStyle(style.btncolor)
		let lastBtn = new ButtonBuilder()
			.setCustomId('last_embed')
			.setEmoji(style.lastEmoji)
			.setStyle(style.skipcolor)
		let deleteBtn = new ButtonBuilder()
			.setCustomId('delete_embed')
			.setEmoji(style.delEmoji)
			.setStyle(style.delcolor)
		let pageMovingButtons = new ActionRowBuilder()
		if (style.skipBtn == true) {
			if (style.delBtn) {
				pageMovingButtons.addComponents([ firstBtn, backBtn, deleteBtn, forwardBtn, lastBtn ]);
			} else {
				pageMovingButtons.addComponents([ firstBtn, backBtn, forwardBtn, lastBtn ]);
			};
		} else {
			if (style.delBtn) {
				pageMovingButtons.addComponents([backBtn, deleteBtn, forwardBtn])
			} else {
				pageMovingButtons.addComponents([backBtn, forwardBtn])
			};
		};
		var currentPage = 0
		comps.push(pageMovingButtons);
		var m
		if (message.commandId) {
			if (style.pgCount) {
				await message.followUp({ content: `***trang: 1/${pages.length}***`, embeds: [pages[0]], components: comps, allowedMentions: { repliedUser: false } });
			} else {
				await message.followUp({ embeds: [pages[0]], components: comps, allowedMentions: { repliedUser: false } });
			};
			m = await message.fetchReply()
		} else if (!message.commandId) {
			if (style.pgCount) {
				m = await message.reply({ content: `***trang: 1/${pages.length}***`, embeds: [pages[0]], components: comps, allowedMentions: { repliedUser: false }});
			} else {
				m = await message.reply({ embeds: [pages[0]], components: comps, allowedMentions: { repliedUser: false } });
			};
		};
		let collector = m.createMessageComponentCollector({ time: style.timeout || 120000 });
		collector.on('collect', async (b) => {
			if (!b.isButton()) return
			if (b.message.id !== m.id) return
			b.deferUpdate()
			if (b.user.id !== (message.user ? message.user : message.author).id) return;
			if (b.customId == 'back_button_embed') {
				if (currentPage - 1 < 0) currentPage = pages.length - 1
				else currentPage -= 1
			} else if (b.customId == 'forward_button_embed') {
				if (currentPage + 1 == pages.length) currentPage = 0
				else currentPage += 1
			} else if (b.customId == 'last_embed') {
				currentPage = pages.length - 1
			} else if (b.customId == 'first_embed') {
				currentPage = 0
			};
			if (b.customId !== 'delete_embed') {
				if (style.pgCount) {
					m.edit({ content: `***trang: ${currentPage + 1}/${pages.length}***`, embeds: [pages[currentPage]], components: comps, allowedMentions: { repliedUser: false } });
				} else {
					m.edit({ embeds: [pages[currentPage]], components: comps, allowedMentions: { repliedUser: false }});
				};
			} else if (b.customId === 'delete_embed') {
				collector.stop('del')
			};
		});
		collector.on('end', async (coll, reason) => {
			if (reason === 'del') {
				await m.delete().catch(() => {})
			} else {
				firstBtn = new ButtonBuilder()
					.setCustomId('first_embed')
					.setEmoji(style.firstEmoji)
					.setStyle(style.skipcolor)
					.setDisabled(true)
				forwardBtn = new ButtonBuilder()
					.setCustomId('forward_button_embed')
					.setEmoji(style.forwardEmoji)
					.setStyle(style.btncolor)
					.setDisabled(true)
				backBtn = new ButtonBuilder()
					.setCustomId('back_button_embed')
					.setEmoji(style.backEmoji)
					.setStyle(style.btncolor)
					.setDisabled(true)
				lastBtn = new ButtonBuilder()
					.setCustomId('last_embed')
					.setEmoji(style.lastEmoji)
					.setStyle(style.skipcolor)
					.setDisabled(true)
				deleteBtn = new ButtonBuilder()
					.setCustomId('delete_embed')
					.setEmoji(style.delEmoji)
					.setStyle(style.delcolor)
					.setDisabled(true)
				pageMovingButtons = new ActionRowBuilder()
				if (style.skipBtn == true) {
					if (style.delBtn) {
						pageMovingButtons.addComponents([ firstBtn, backBtn, deleteBtn, forwardBtn, lastBtn ]);
					} else {
						pageMovingButtons.addComponents([ firstBtn, backBtn, forwardBtn, lastBtn ]);
					};
				} else {
					if (style.delBtn) {
						pageMovingButtons.addComponents([backBtn, deleteBtn, forwardBtn])
					} else {
						pageMovingButtons.addComponents([backBtn, forwardBtn])
					};
				};
				m.edit({ components: [pageMovingButtons] });
			};
		 });
	  } catch (err) {
		  console.log(`embedPages | lỗi: ${err.stack}`)
	  }
   },
/***
  **
***/
};